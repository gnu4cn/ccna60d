# 思科®口令恢复

我们偶尔都会忘记一些口令，这同样使用与路由器。我（作者）就曾花了很多时间，与惊慌失措的工程师通话，通过口令恢复流程竭力恢复路由器。遗憾的是，恢复路由器口令确实设计断电重启路由器。在以下情形下，咱们需要执行口令恢复：

- 当咱们忘记 `enable` 模式密码，而因此无法配置路由器时
- 当咱们购买了一个留有口令的二手路由器时
- 当咱们接替了另一名离职工程师工作，却未交接口令时

咱们要执行的具体恢复过程，将咱们正尝试访问的设备类型。当咱们执行一次 `"Cisco Password Recovery for X series"` 的 Internet 检索时，咱们应很容易找到，针对咱们正尝试访问的某机架的恢复过程。交换机的口令恢复会更为复杂，故我们将不在此介绍。以下是思科路由器上口令恢复所涉及的典型步骤示例：

1. 关闭路由器电源；
2. 当适用时，要移除路由器背部的紧凑型闪存卡；
3. 打开路由器电源；
4. 一旦 `Rommon1>` 提示符出现，就要修改配置寄存器为在启动时忽略 NVRAM：`confreg 0x2142`；
5. 当适用时，要插入紧凑型闪存卡；
6. 输入 `reset`；
7. 当咱们被提示以输入 *initial configuration* 时，要输入 `No` 并按下回车键；
8. 在 `Router>` 提示符处输入 `enable`；
9. 在 `Router#` 提示符处，输入 `copy start run` 这条命令，并随按下回车键，拷贝启动配置到运行配置。

请注意，咱们已在未加载配置下，等入了这一路由器。现在咱们已在路由器中，咱们正加载该路由器通常用到的配置，从而咱们可编辑口令。

1. 使用 `config t` 这一命令，以进入全局配置模式；
2. 使用下面这条命令，创建一个新的用户名及口令。在这一示例中，用户名为 `admin`，口令为 `cisco`： `Router(config)#username admin privilege 15 password cisco`；
3. 使用这条命令修改 `boot` 语句： `config-register 0x2102`；
4. 使用这条命令保存配置：`copy run start`；
5. 重新加载该路由器，并于随后使用新的用户名和密码等入该路由器。
