# IPv6 的历史

## 合乎目的吗？

当 Tim Berners-Lee 爵士于 1989 年设计出万维网时，他根本无法预料到万维网将对世界产生如此巨大影响。当时，个人电脑的价格高得令人望而却步，除非咱们能负担得起昂贵的广域网连接费用，否则无法轻松实现远距离通信。即便如此，当时也没有供所有人遵循的某种共同认可通信模式。

某些东西需要改变，而改变的形式，就是某种新的 IP 地址分配标准。从曾犯下的错误中学习，以及为响应业务需求中的变化，互联网工程任务组 (IETF) 早在 1998 年，便发布了众多 IPv6 标准中的第一个标准。

这里将没有切换日期；相反，网络将逐步过渡到同时运行 IPv4 和 IPv6，并最终 IPv4 将被淘汰。当我（作者）在 2014 年撰写本书上一版时，约有 1% 的互联网流量运行于 IPv6 上。现在其到了 20%。由此可见，如咱们希望继续从事 IT 工作，咱们就必须掌握他的原因。


## 为什么要迁移？

我（作者）已经说过，当 IPv4 被设计出来时，互联网还未被大众所用，他们为什么要使用呢？那时还没有网站，没有电子商务，没有移动网络，也没有社交媒体。即使咱们买得起个人电脑，也没有什么可用其处理的。当然，现在几乎人人都在线上。我们互联网完成大多数我们的日常工作，企业也依靠互联网生存。很快我们将使用移动设备，管理汽车和家庭安防、打开咖啡壶、设置暖气温度，以及设置电视录制我们喜爱的节目等。

不仅在欧洲和美洲，而且在诸如印度和中国等有着数十亿人口的快速发展国家，这其中的一些事情都已发生。IPv4 根本无法胜任这项工作，即使能胜任，也没有足够的地址来满足需求。

以下是改用 IPv6 的几个好处：

- 简化的 IPv6 数据包头部
- 更大的地址空间
- IPv6 的寻址层次
- IPv6 的可扩展性
- IPv6 广播消除
- 无状态的自动配置
- 集成了移动性
- 集成了增强型安全性

我（作者）喜欢深入研究 IPv6 的数据包层分析，以及可用的多种头部类型，但这里没有足够的篇幅。因为在考试中那些内容不会测试，所以没有包括在内的需要。相反，我将重点介绍考试和作为思科工程师，咱们需要了解的内容。

## 十六进制计数

也许值得对十六进制计数，做一个简短的记忆梳理。

我们知道，十进制数字由从 0 到 9 的 10 个数字组成。十六进制计数则是从 O 到 F，有 16 个数字。这些方案也分别称为底数 10、底数 2 与底数 16。

咱们可以看到，每种计数系统都以 0 开头，所以：

- 十进制 -- 0,1,2,3,4,5,6,7,8,9
- 二进制 -- 0,1
- 十六进制 -- 0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F


当咱们书写这些方案时，咱们可能没有意识到，咱们使用的是从右到左的一些列；最右边的是列一，而下一列为底数乘以前一列，因此：

| 计数底数 | N 的 3 次幂 | N 的 2 次幂 | N 的 1 次幂 | N（0 次幂） |
| :-: | :-: | :-: | :-: | :-: |
| 10 -- 十进制 | 1000 | 100 | 10 | 1 |
| 2 -- 二进制 | 8 | 4 | 2 | 1 |
| 16 -- 十六进制 | 4096 | 256 | 16 | 1 |


咱们可以看到，从右边开始，每一列的值都在增加。对于十进制，其为 10 乘以 1。对于二进制，其为 1，然后为 1 乘以 2。 当咱们比较这三种计数系统，直到最后的十六进制数字时，咱们就能开始看到，为什么十六进制是 IPv6 分址的首选格式。

| 十进制 | 二进制 | 十六进制 |
| -- | -- | -- |
| `0` | `0000` | `0` |
| `1` | `0001` | `1` |
| `2` | `0010` | `2` |
| `3` | `0011` | `3` |
| `4` | `0100` | `4` |
| `5` | `0101` | `5` |
| `6` | `0110` | `6` |
| `7` | `0111` | `7` |
| `8` | `1000` | `8` |
| `9` | `1001` | `9` |
| `10` | `1010` | `A` |
| `11` | `1011` | `B` |
| `12` | `1100` | `C` |
| `13` | `1101` | `D` |
| `14` | `1110` | `E` |
| `15` | `1111` | `F` |

为了提供我们未来多年需求的足够地址，IPv6 被设计为提供数万亿个可用地址。为了实现这一目的，编号范围已从 32 个二进制位，被扩展到 128 个位。每 4 个比特位可表示为一个十六进制数字（可从上图看出）。那么逻辑表明，两个十六进制数字将给到咱们 8 个二进制位，也就是一个字节或八位组。

IPv6 地址为 128 位长，其被分为 8 个 16 位组，在以完整格式书写时，每组用冒号分隔。每 4 个十六进制位，可在 `0000` 到 `FFFF` 范围，其中 F 是十六进制计数系统中的最高位：


| 第`8`组 | 第`7`组 | 第`6`组 | 第`5`组 | 第`4`组 | 第`3`组 | 第`2`组 | 第`1`组 |
| -- | -- | -- | -- | -- | -- | -- | -- |
| `0000` | `0000` | `0000` | `0000` | `0000` | `0000` | `0000` | `0000` |
| to | to | to | to | to | to | to | to |
| `FFFF` | `FFFF` | `FFFF` | `FFFF` | `FFFF` | `FFFF` | `FFFF` | `FFFF` |


