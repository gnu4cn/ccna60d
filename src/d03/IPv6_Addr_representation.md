# IPv6地址表示法

IPv6 地址可以以下方法表示：

- 首选或完整的地址表示或形式
- 压缩的表示法
- 嵌入了 IPv4 地址的 IPv6 地址

尽管首选的形式或表示法，是以文本格式表示 128 位 IPv6 地址的最常用方法，但熟悉 IPv6 地址表示的其他两种方法也很重要。这些方法会在接下来的小节中介绍。


## 首选形式

IPv6 地址的首选表示法，是最长的那种格式，也称为 IPv6 地址的完整形式。这种格式表示了用以构成某个 IPv6 地址的全部 32 个十六进制字符。这是通过将地址写作 8 个 16 位十六进制字段，中间用冒号隔开的序列（例如，`3FFF:1234:ABCD:5678:020C:CEFF:FEA7:F3A0`）。


每个 16 位字段由四个十六进制字符表示，每个字符表示 4 个二进制位。每个 16 位的十六进制字段，可有着介于 `0x0000` 与 `OxFFFF` 间的值，但正如这个课程模组稍后所述，前 `16` 位中的一些不同值已被保留，因此并非所有可能值都被用到了。在书写 IPv6 地址时，十六进制字符不区分大小写。换句话说，`2001:ABCD:0000` 与 `2001:abcd:0000` 完全相同。IPv6 地址表示的完整形式如下图 3.4 中所示：

![IPv6地址表示法的首选形式](../images/0704.png)

**图 3.4** -- **首选的 IPv6 地址表示形式**


以下 IPv6 地址，是这种首选形式下有效 IPv6 地址的示例：


- `0000:0000:0000:0000:0000:0000:0000:0001`
- `2001:0000:0000:1234:0000:5678:af23:bcd5`
- `3FFF:0000:0000:1010:1A2B:5000:0B00:DE0F`
- `fec0:2004:ab10:00cd:1234:0000:0000:6789`
- `0000:0000:0000:0000:0000:0000:0000:0000`


## 压缩表示法

压缩表示法允许 IPv6 地址以两种方式之一得以压缩 。对由零组成的连续 16 位字段，或 IPv6 地址中的前导零，第一种方法允许用于压缩有效 IPv6 地址中连续零值的双冒号（`::`）。在使用这种方法时，记住这个双冒号只能在 IPv6 地址使用一次很重要。

当这种压缩格式被用到时，每个节点和路由器，都要负责计算双冒号两侧的比特数，确定处其所表示的零的确切数量。下表 3.1 给出了首选格式下的一些 IPv6 地址，与这些地址的压缩格式：

**表 3.1** -- **首选压缩形式下的完整 IPv6 地址**


| 完整 IPv6 地址表示法 | 压缩 IPv6 地址表示法 |
| -- | -- |
| `0000:0000:0000:0000:0000:0000:0000:0001` | `::0001` |
| `2001:0000:0000:1234:0000:5678:af23:bcd5` | `2001::1234:0:5678:af23:bcd5` |
| `3FFF:0000:0000:1010:1A2B:5000:0B00:DE0F` | `3FFF::1010:1A2B:5000:B00:DE0F` |
| `FEC0:2004:AB10:00CD:1234:0000:0000:6789` | `FEC0:2004:AB10:CD:1234::6789` |
| `0000:0000:0000:0000:0000:FFFF:172.16.255.1` | `::FFFF:172.16.255.1` |
| `0000:0000:0000:0000:0000:0000:172.16.255.1` | `::172.16.255.1` |
| `0000:0000:0000:0000:0000:0000:0000:0000` | `::` |

正如先前指出的，在单个 IPv6 地址中双冒号不能使用多于一次。例如，当咱们打算以压缩形式，表示完整的 IPv6 地址 `2001:0000:0000:1234:0000:0000:af23:bcd5` 时，咱们只能使用一次双冒号，即使地址中有两个连续的零字符串。因此，尝试将这个地址压缩为 `2001::1234::af23:bcd5` 将被视为非法；不过，可以根据偏好，这同一个 IPv6 地址，可被压缩为 `2001::1234:0000:0000:af23:bcd5` 或 `2001:0000:0000:1234::af23:bcd5`。


IPv6 压缩地址表示的第二种方法，适用于每个 16 位字段，并允许 IPv6 地址中的前导零省略。在使用这种方法时，若 16 位字段中的每一位都被设置为 `0`，那么就要用一个零表示这个字段。在这种情形下，并非全部的 0 值可被省略。下表 3.2 给出了一些首选形式下的 IPv6 地址，以及他们可被如何使用 IPv6 压缩形式表示法的第二种方法压缩。

**表3.2** -- **替代压缩形式下的完整 IPv6 地址**

| 完整 IPv6 地址表示 | 压缩 IPv6 地址表示 |
| -- | -- |
| `0000:0123:0abc:0000:04b0:0678:f000:0001` | `0::123:abc:0:4b0:678:f000:1` |
| `2001:0000:0000:1234:0000:5678:af23:bcd5` | `2001:0:0:1234:0:5678:af23:bcd5` |
| `3FFF:0000:0000:1010:1A2B:5000:0B00:DE0F` | `3FFF:0:):1010:1A2B:5000:B00:DE0F` |
| `fec0:2004:ab10:00cd:1234:0000:0000:6789` | `fec0:2004:ab10:cd:1234:0:0:6789` |
| `0000:0000:0000:0000:0000:FFFF:172.16.255.1` | `0:0:0:0:0:FFFF:172.16.255.1` |
| `0000:0000:0000:0000:0000:0000:172.16.255.1` | `0:0:0:0:0:0:172.16.255.1` |
| `0000:0000:0000:0000:0000:0000:0000:0000` | `0:0:0:0:0:0:0:0` |

尽管有两种以压缩形式表示完整 IPv6 地址的方法，但重要的是这两种方法并不相互排斥。换句话说，在同一时间这两种方法均可用于表示同一个 IPv6 地址。当完整 IPv6 地址同时包含连续零字符串，以及地址内部其他字段的前导零时，这种做法就会常常用到。下表 3.3 给出了一些同时包含连续零字符串及前导零的完整形式 IPv6 地址，及这些地址在压缩形式下被如何表示：

**表 3.3** -- **同时使用两种压缩形式方法的一些完整 IPv6 地址**

| 完整 IPv6 地址表示 | 压缩 IPv6 地址表示 |
| -- | -- |
| `0000:0000:0000:0000:1a2b:000c:f123:4567` | `::1a2b:c:f123:4567` |
| `FEC0:0004:AB10:00CD:1234:0000:0000:6789` | `FEC0:4:AB10:CD:1234::6789` |
| `3FFF:0c00:0000:1010:1A2B:0000:0000:DE0F` | `3FFF:c00:0:1010:1A2B::DE0F` |
| `2001:0000:0000:1234:0000:5678:af23:00d5` | `2001::1234:0:5678:af23:d5` |


## 内嵌 IPv4 地址的 IPv6 地址

IPv6 地址的第三种表示法，是在 IPv6 地址内部使用某个嵌入的 IPv4 地址。这种方法虽然有效，但重要的是记住其已被启用，且因为他只适用于 IPv4 到 IPv6 的过渡，而被认为是过时的表示法。


