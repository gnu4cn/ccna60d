# 非广播多路访问技术

出现于广域组网中的一种特殊技术，便是非广播的多路访问（NBMA）。这种技术展现了一些未出现在传统广播组网中的挑战。当一组希望在同一网络上通信的系统缺乏原生的广播支持时，NBMA 的需求便应运而生。当设备无法发送以多路访问网段上全体设备为目的地的数据包时，问题便会出现。帧中继、ATM 及 ISDN 等技术，默认都属于 NBMA 技术的一些示例。

所有这些技术均不具备支持广播的原生能力。这会阻止他们运行那些会在其运行中用到广播的路由协议。原生的广播支持，在那些非广播的网络同样缺乏。在路由协议情形下，所有参与节点，都必须接收组播的更新。使用 NBMA 网络运行路由协议的一种方式，便是以复制的单播数据包，发送组播或广播播数据包。以这种方式，广播/组播的数据帧，就被单独地发送到拓扑中的每个节点。在这种情况下，棘手的部分在于，设备必须解决三层到二层的解析问题。特定的数据包，必须要被投送到需要接收他们的那些特定机器。

解决这种三层到二层解析问题的一些方法论就必须存在。三层地址通常是 IP 地址，而二层地址则通常会根据所使用的技术而变化。在帧中继的情形下，二层地址将由数据链路连接标识符（DLCI）编号构成，因此将 DLCI 解析为 IP 地址一种方法就必须找到。

在广播网络情形下，三层的解析会将 MAC 地址用作二层的地址，同时这个地址必须要被解析为 IPv4 地址。这是以地址解析协议（ARP）完成的。在某种基于广播的网络中，设备通过指定打算与其通信的设备（通常经由 DNS 学习到）广播请求，并询问特定于这些设备的 MAC 地址。回复是经由单播发送，并包含了所请求的 MAC 地址。

在 NBMA 环境中，咱们仍需绑定三层地址（IP 地址）到二层地址（DLCI）。这可通过反向 ARP 以自动化的方式完成。这种方式用于解析远端的三层地址为二层地址，且仅在本地使用。反向 ARP 可用于帧中继环境。

反向 ARP 在 NBMA 环境中作为三层到二层解析解决方案的问题，在于其被限制为那些直连设备。这在部分网状的 NBMA 网络（其中并非所有设备都是直连的）中造成问题。

如下图 37.2 中所示，有两种 NBMA 接口类型存在 —— 多点接口与点对点接口。多点的接口就需要某种三层到二层的解析方法。顾名思义，他可以是一些二层电路的终结点。

![NBMA 接口类型](../images/4102.png)

**图 37.2** -— **NBMA 接口类型**


当帧中继配置于某一设备的主物理接口上时，那么该接口将默认为多点的。当某个子接口于某个帧中继物理接口上被创建时，那么将其创建为多点模式的选项便存在。针对物理接口与子接口，三层到二层的解析都务必要得以配置。在帧中继下实现这一解析有两个选项：

- 反向 ARP（Inverse ARP）
- 静态映射

三层到二层的解析，在 NBMA 接口上并非总是个问题，因为点对点的 WAN 接口可得以创建。所谓点对点接口，只能终止某单条二层的电路，因此当该接口只与一个设备通信时，那么三层到二层的解析便并无必要。在仅一条电路下，就只有一个要与其通信的二层地址。例如，三层到二层的解析问题，便会在运行某个帧中继点对点子接口类型，或 ATM 的点对点子接口时消失。


