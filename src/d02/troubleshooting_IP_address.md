# 排除 IP 地址问题

## 排除子网掩码和网关问题

当咱们遇到 IP 地址、子网掩码或网关问题时，咱们会看到数种现象出现。可能出现的问题包括以下几种：

- 网络设备可在他们的本地子网内通信，但无法与本地网络以外的设备通信。这通常表明咱们有着某种类型网关配置，或网关运行问题；
- 无法进行任何类型的 IP 通信，无论是内部还是远端。这通常指向某个可能是某些设备失去作用的重大问题；
- 咱们可与某些 IP 地址通信，但不能与所有可用 IP 地址通信的情形。这通常是最难排除的问题，因为他有许多可能的原因。

在这些情况的故障排除过程中，咱们首先应做的事情之一，就是仔细检查咱们设备上的 IP 地址、子网掩码及默认网关配置。咱们还应查看文档，验证这些信息。很多问题都源于错误配置。

当咱们第一次安装网络设备时，通常咱们将手动输入 IP 地址信息、以及子网掩码于默认网关。这里的建议是在提交这些信息前加以检查，因为在这方面人为错误非常多。大多数企业网络都有引入新射到到网络的程序手册，包括测试网关和 SNMP 服务器的可达性。


当咱们在故障排除过程中，需要收集信息时，咱们可能需要执行一些数据包捕获，查看设备之间到底有那些数据包发送。当咱们看到一些并非来自咱们网络上主机的数据包时，咱们可能遇到了某种 VLAN 配置错误问题。当咱们怀疑咱们的子网掩码不正确时，咱们应该检查咱们网络上别的设备的参数。若别的机器工作正常，那么咱们应在工作不正常的设备上，使用同样的子网掩码，然后开始再次测试。

当使用 DHCP 给咱们网络中的设备分配 IP 地址信息，包括子网掩码和默认网关时，咱们应检查 DHCP 服务器的配置，因为这可能是故障会出现的另一方面。或许 DHCP 服务器被错误配置了，或者 DHCP 服务被干扰，因此咱们应将这一步纳入咱们的故障排除流程。你还必须记住要排除 DHCP 池中的那些保留地址，因为这些地址通常将分配给一些服务器与路由器接口。

别的一些可帮助咱们识别出网络中问题出现点的有用故障排除工具，便是 `traceroute` 和 `ping` 了。我们将在全书中及实验中，介绍这两个工具。

请参加 [Free CCNA Training Bonus – Cisco CCNA in 60 Days v4](https://www.in60days.com/free/ccnain60days/) 处今天的考试。



